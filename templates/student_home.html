<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Student Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    
    {% load static %}

    <style>
        body {
            background-color: #f5f7fa;
            padding-bottom: 80px;
        }
        .chat-bubble {
            max-width: 80%;
            margin-bottom: 8px;
            padding: 8px 12px;
            border-radius: 12px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        .chat-bubble.user {
            align-self: flex-end;
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .chat-bubble.ai {
            align-self: flex-start;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            color: #343a40;
        }

        #chat-box {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-height: 500px;
            z-index: 1050;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        #chat-messages {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            padding: 10px;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: .375rem .375rem 0 0;
            font-size: 0.9rem;
        }

      

        #expand-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #007bff;
            color: #fff;
            border: none;
            border-radius: .375rem;
            padding: 6px 12px;
            font-size: 0.9rem;
            display: none;
            z-index: 1060;
        }


        #clear-button {
            margin-top: 8px;
        }

    </style>
</head>
<body class="container">

    <div class="mt-5">
        <h1 class="text-primary">üìö Welcome, {{ user.username }}!</h1>
        <p class="lead">This is your student home page. Ready to learn?</p>

        <ul class="list-unstyled">
            <li><a href="#" class="text-decoration-none">üìù Create New Study Content (Coming Soon)</a></li>
            <li></li><a href="{% url 'collection_list' %}" class="btn btn-primary mt-3">üìö My Collections</a></li>
            <li>
                <a href="{% url 'collection_list' %}" class="btn btn-primary mt-3">üìö My Collections</a>
            </li>
            
            <li><a href="{% url 'logout' %}" class="text-decoration-none text-danger">üö™ Logout</a></li>
        </ul>
    </div>

    <!-- Chatbox -->
    <div id="chat-box" class="shadow">
        <div id="chat-header" class="d-flex justify-content-between align-items-center p-2 border-bottom">
            <h5 class="mb-0">AI Assistant</h5>
            <button id="hide-chat-btn" class="btn btn-outline-secondary btn-sm">Hide</button>
        </div>
        
    
        <div id="chat-messages"></div>
    
        <form id="chat-form">
            <div class="mb-2">
                <textarea id="chat-input" class="form-control" placeholder="Ask something... (Shift+Enter for newline)"></textarea>
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <button type="submit" id="chat-submit" class="btn btn-primary">Send</button>
                <button type="button" id="clear-button" class="btn btn-outline-secondary btn-sm" onclick="clearChat()">üßπ Clear</button>
            </div>
        </form>
    </div>
    
    
    <!-- The Expand Button -->
    <button id="expand-button" onclick="expandChat()">
        Show Chat
    </button>
    


    <!-- Bootstrap & Script -->
    <script src="{% static 'js/chat.js' %}"></script>  <!-- Make sure to load the static file correctly -->
</body>
</html>
